@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Syne:wght@400;700;800&display=swap');

/* ─── VARIABLES ─── */
:root {
  --bg-primary: #07090f;
  --bg-secondary: #0b0e1a;
  --bg-tertiary: #0e121c;
  --bg-hover: #111e38;
  --bg-active: #1a56db;
  --bg-gradient-start: #1a56db;
  --bg-gradient-end: #1e3a8a;
  --bg-gradient-hover-start: #2563eb;
  --bg-gradient-hover-end: #1d4ed8;
  --bg-code: #0f2040;
  --bg-code-hover: #1a3860;
  --bg-success: #0a1f12;
  --bg-warning: #2a1800;
  --bg-danger-strong: #4a0000;
  --bg-danger-medium: #3a1500;
  --bg-danger-faded: #1a0800;
  --bg-danger-verdict: #0f0500;
  --bg-success-verdict: #070f0a;

  --border-primary: #1a2438;
  --border-secondary: #10182c;
  --border-tertiary: #151e35;
  --border-interactive: #1a3860;
  --border-accent: #2a6edb;
  --border-success: #143520;
  --border-danger-strong: #cc0000;
  --border-danger-medium: #7a3a00;
  --border-success-strong: #1d6b3a;
  --border-warning-strong: #d44000;

  --text-primary: #e0e8f8;
  --text-secondary: #b0c8e8;
  --text-bright: #ffffff;
  --text-muted: #4a6080;
  --text-muted-light: #6a80a0;
  --text-placeholder: #3a5070;
  --text-accent: #5a90e0;
  --text-accent-hover: #80b0f0;
  --text-on-accent: #fff;
  --text-success: #30c070;
  --text-warning: #e0b040;
  --text-danger: #f87060;
  --text-danger-muted: #c04030;
  --text-success-muted: #1a6b3a;

  --shadow-accent: 0 4px 18px rgba(42,110,219,.4);
  --shadow-warning-pulse: 0 0 0 10px rgba(212,64,0,0);
}

[data-theme='light'] {
  --bg-primary: #f4f7fa;
  --bg-secondary: #ffffff;
  --bg-tertiary: #f7fafc;
  --bg-hover: #f0f4f8;
  --bg-active: #e0e7ff;
  --bg-gradient-start: #4f46e5;
  --bg-gradient-end: #3b82f6;
  --bg-gradient-hover-start: #4338ca;
  --bg-gradient-hover-end: #2563eb;
  --bg-code: #eef2ff;
  --bg-code-hover: #e0e7ff;
  --bg-success: #f0fff4;
  --bg-warning: #fffbeb;
  --bg-danger-strong: #fff5f5;
  --bg-danger-medium: #fffaf0;
  --bg-danger-faded: #fff5f5;
  --bg-danger-verdict: #fff5f5;
  --bg-success-verdict: #f0fff4;

  --border-primary: #e6ecf2;
  --border-secondary: #f1f5f9;
  --border-tertiary: #e2e8f0;
  --border-interactive: #c7d2fe;
  --border-accent: #3b82f6;
  --border-success: #c6f6d5;
  --border-danger-strong: #fed7d7;
  --border-danger-medium: #feebc8;
  --border-success-strong: #68d391;
  --border-warning-strong: #f6ad55;

  --text-primary: #1a202c;
  --text-secondary: #2d3748;
  --text-bright: #000000;
  --text-muted: #a0aec0;
  --text-muted-light: #718096;
  --text-placeholder: #a0aec0;
  --text-accent: #3b82f6;
  --text-accent-hover: #2563eb;
  --text-on-accent: #ffffff;
  --text-success: #2f855a;
  --text-warning: #b7791f;
  --text-danger: #c53030;
  --text-danger-muted: #c53030;
  --text-success-muted: #2f855a;
  
  --shadow-accent: 0 4px 18px rgba(59,130,246,.4);
  --shadow-warning-pulse: 0 0 0 10px rgba(246, 173, 85, 0);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: 'Syne', sans-serif;
  font-size: 14px;
  min-height: 100vh;
  transition: background .2s, color .2s;
}

/* ── LAYOUT ── */
.app { display: grid; grid-template-columns: 320px 1fr; grid-template-rows: 64px 1fr; height: 100vh; overflow: hidden; }
.main { display: flex; flex-direction: column; overflow: hidden; }

/* ── HEADER ── */
.hdr { grid-column: 1 / -1; background: var(--bg-secondary); border-bottom: 1px solid var(--border-primary); display: flex; align-items: center; padding: 0 28px; gap: 16px; }
.hdr-ico { width: 36px; height: 36px; background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end)); border-radius: 9px; display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: 800; color: var(--text-on-accent); flex-shrink: 0; }
.hdr-t { font-size: 16px; font-weight: 800; color: var(--text-bright); letter-spacing: -.3px; }
.hdr-s { font-size: 11px; color: var(--text-muted); font-family: 'IBM Plex Mono', monospace; margin-top: 2px; }
.hdr-r { margin-left: auto; display: flex; gap: 10px; align-items: center; }
.pill { padding: 4px 10px; border-radius: 12px; font-size: 11px; font-family: 'IBM Plex Mono', monospace; font-weight: 600; }
.pill-b { background: var(--bg-code); color: var(--text-accent); border: 1px solid var(--border-interactive); }
.pill-g { background: var(--bg-success); color: var(--text-success); border: 1px solid var(--border-success); }

/* ── SIDEBAR ── */
.sb { background: var(--bg-secondary); border-right: 1px solid var(--border-primary); display: flex; flex-direction: column; overflow: hidden; }
.sb-hd { padding: 20px 20px 12px; border-bottom: 1px solid var(--border-tertiary); }
.sb-lbl { font-size: 10px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-placeholder); font-family: 'IBM Plex Mono', monospace; margin-bottom: 12px; }
.sb-list { overflow-y: auto; flex: 1; }

.cli { display: flex; align-items: center; gap: 12px; padding: 14px 20px; cursor: pointer; border-bottom: 1px solid var(--border-secondary); transition: background .12s; position: relative; }
.cli:hover { background: var(--bg-hover); }
.cli.active { background: var(--bg-active); border-left: 4px solid var(--border-accent); color: var(--text-bright); padding-left: 16px; }
.cli.active .cli-nm { color: var(--text-bright); }
.cli-av { width: 34px; height: 34px; border-radius: 8px; background: linear-gradient(135deg, var(--bg-code), var(--border-interactive)); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700; color: var(--text-accent); flex-shrink: 0; }
.cli.active .cli-av { background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end)); color: var(--text-on-accent); }
.cli-info { flex: 1; min-width: 0; }
.cli-nm { font-size: 13px; font-weight: 700; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; transition: color .15s; }
.cli-id { font-size: 10px; color: var(--text-placeholder); font-family: 'IBM Plex Mono', monospace; }

.cli-dot { width: 9px; height: 9px; border-radius: 50%; flex-shrink: 0; margin-left: auto; }
.d-ok  { background: var(--bg-success); border: 2px solid var(--border-success-strong); }
.d-med { background: var(--bg-danger-medium); border: 2px solid var(--border-danger-medium); }
.d-hi  { background: var(--bg-danger-strong); border: 2px solid var(--border-danger-strong); animation: dp 1.5s infinite; }
@keyframes dp { 0%, 100% { opacity: 1; } 50% { opacity: .4; } }

.cli-del { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: transparent; border: none; color: var(--text-muted); font-size: 16px; cursor: pointer; opacity: 0; transition: .15s; padding: 5px; border-radius: 6px; }
.cli:hover .cli-del { opacity: 1; }
.cli-del:hover { background-color: var(--bg-danger-faded); color: var(--text-danger); }

.sb-add { margin: 16px 20px; background: var(--bg-code); border: 1px solid var(--border-interactive); border-radius: 8px; color: var(--text-accent); padding: 12px; font-family: 'Syne', sans-serif; font-weight: 700; font-size: 12px; cursor: pointer; width: calc(100% - 40px); transition: all .15s; }
.sb-add:hover { background: var(--bg-code-hover); color: var(--text-accent-hover); }

/* ── TABS & PANELS ── */
.tabs { display: flex; border-bottom: 1px solid var(--border-primary); background: var(--bg-secondary); padding: 0 24px; gap: 4px; }
.tab { padding: 14px 18px; font-size: 12px; font-weight: 700; letter-spacing: .5px; color: var(--text-placeholder); cursor: pointer; border-bottom: 3px solid transparent; transition: all .12s; text-transform: uppercase; font-family: 'IBM Plex Mono', monospace; }
.tab:hover { color: var(--text-muted-light); }
.tab.on { color: var(--text-accent); border-color: var(--border-accent); }
.cnt { flex: 1; overflow-y: auto; padding: 28px; }

.panel-h { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.panel-t { font-size: 20px; font-weight: 800; color: var(--text-bright); }

/* ─── WELCOME / EMPTY STATE ─── */
.welcome-panel, .empty-state { text-align: center; padding: 60px 48px; margin: auto; color: var(--text-muted-light); font-family: 'IBM Plex Mono', monospace; font-size: 14px; }
.welcome-panel h2 { font-family: 'Syne', sans-serif; color: var(--text-bright); font-size: 26px; margin-bottom: 10px; }
.welcome-panel p, .empty-state p { max-width: 420px; margin: 0 auto 24px; line-height: 1.7; }
.empty-state { border: 1px dashed var(--border-primary); border-radius: 12px; background: var(--bg-tertiary); }
.empty-state h3 { font-family: 'Syne', sans-serif; color: var(--text-secondary); font-size: 18px; margin-bottom: 6px; }

/* ── FORM ── */
.fg2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.fg3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; }

.sec { font-size: 10px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-placeholder); font-family: 'IBM Plex Mono', monospace; margin: 28px 0 14px; display: flex; align-items: center; gap: 10px; }
.sec::after { content: ''; flex: 1; height: 1px; background: var(--border-primary); }

.fld { display: flex; flex-direction: column; gap: 6px; }
.fld label { font-size: 11px; color: var(--text-muted-light); font-weight: 700; letter-spacing: .3px; }
.fld input, .fld select { background: var(--bg-tertiary); border: 1px solid var(--border-primary); border-radius: 7px; color: var(--text-secondary); padding: 10px 12px; font-family: 'IBM Plex Mono', monospace; font-size: 13px; outline: none; transition: border .12s; width: 100%; }
.fld input:focus, .fld select:focus { border-color: var(--border-accent); }

.tog-row { display: flex; align-items: center; gap: 10px; background: var(--bg-tertiary); border: 1px solid var(--border-primary); border-radius: 7px; padding: 11px 12px; cursor: pointer; transition: border .12s; user-select: none; }
.tog-row:hover { border-color: var(--border-interactive); }
.tog { width: 36px; height: 20px; border-radius: 10px; background: var(--border-tertiary); border: 1px solid var(--border-interactive); position: relative; transition: background .18s; flex-shrink: 0; }
.tog.on { background: var(--bg-gradient-start); border-color: var(--border-accent); }
.tog::after { content: ''; position: absolute; width: 14px; height: 14px; border-radius: 50%; background: var(--text-placeholder); top: 2px; left: 2px; transition: transform .18s, background .18s; }
.tog.on::after { transform: translateX(16px); background: var(--text-on-accent); }
.tog-lbl { font-size: 12px; color: var(--text-muted-light); flex: 1; }

.seuil-box { background: var(--bg-tertiary); border: 1px solid var(--border-primary); border-radius: 9px; padding: 12px 16px; margin-bottom: 16px; font-size: 12px; color: var(--text-secondary); font-family: 'IBM Plex Mono', monospace; line-height: 1.6; }
.seuil-box strong { color: var(--text-accent-hover); font-weight: 600; }

.sec-toggle { font-size: 13px; font-weight: 700; color: var(--text-muted-light); cursor: pointer; margin: 28px 0 18px; display: flex; align-items: center; gap: 8px; }
.sec-toggle span { transition: color .15s; }
.sec-toggle:hover span { color: var(--text-accent); }

.advanced-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 12px; animation: fadeIn .3s; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

.run { background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end)); border: none; border-radius: 9px; color: var(--text-on-accent); padding: 12px 24px; font-family: 'Syne', sans-serif; font-weight: 800; font-size: 14px; cursor: pointer; letter-spacing: .4px; transition: all .18s; display: inline-flex; align-items: center; gap: 8px; }
.run:hover { background: linear-gradient(135deg, var(--bg-gradient-hover-start), var(--bg-gradient-hover-end)); transform: translateY(-1px); box-shadow: var(--shadow-accent); }

/* ── RÉSULTATS ── */
.verdict-box { display: flex; align-items: center; gap: 24px; background: var(--bg-secondary); border: 1px solid var(--border-primary); border-radius: 14px; padding: 24px; margin-bottom: 24px; }
.vc { display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100px; height: 100px; border-radius: 50%; flex-shrink: 0; border: 4px solid; }
.vc-ok  { border-color: var(--border-success-strong); background: var(--bg-success-verdict); }
.vc-al  { border-color: var(--border-warning-strong); background: var(--bg-danger-verdict); animation: vp 2s infinite; }
@keyframes vp { 0%, 100% { box-shadow: var(--shadow-warning-pulse); } 50% { box-shadow: 0 0 0 10px rgba(212,64,0,0); } }

.vc-n { font-size: 32px; font-weight: 800; font-family: 'IBM Plex Mono', monospace; line-height: 1; }
.vc-ok .vc-n { color: var(--text-success); }
.vc-al .vc-n { color: var(--text-danger); }
.vc-sub { font-size: 10px; font-family: 'IBM Plex Mono', monospace; letter-spacing: .5px; margin-top: 4px; text-transform: uppercase; font-weight: 600; }
.vc-ok .vc-sub { color: var(--border-success-strong); }
.vc-al .vc-sub { color: var(--border-warning-strong); }

.vd-nm   { font-size: 22px; font-weight: 800; color: var(--text-bright); }
.vd-meta { font-size: 11px; color: var(--text-muted-light); font-family: 'IBM Plex Mono', monospace; margin-top: 5px; line-height: 1.6; }
.vd-chips { display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; }

/* ── TABLE INDICATEURS ── */
.ind-table { width: 100%; border-collapse: collapse; }
.ind-table th { text-align: left; padding: 10px 14px; font-size: 10px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-placeholder); font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-primary); background: var(--bg-tertiary); }
.ind-table td { padding: 14px; border-bottom: 1px solid var(--border-secondary); vertical-align: middle; }
.ind-table tr:hover td { background: var(--bg-hover); }
.row-alerte td { background: var(--bg-danger-faded) !important; }

.ind-id { display: inline-flex; align-items: center; justify-content: center; width: 24px; height: 24px; border-radius: 6px; font-size: 11px; font-family: 'IBM Plex Mono', monospace; font-weight: 600; background: var(--bg-code); color: var(--text-accent); }
.ind-label { font-weight: 700; color: var(--text-secondary); font-size: 13px; margin-bottom: 3px; }
.ind-rule { font-size: 11px; color: var(--text-placeholder); font-family: 'IBM Plex Mono', monospace; }
.ind-vals { font-family: 'IBM Plex Mono', monospace; font-size: 12px; color: var(--text-muted-light); }

.v-ALERTE { display: inline-flex; align-items: center; gap: 6px; border-radius: 7px; padding: 5px 12px; font-size: 12px; font-family: 'IBM Plex Mono', monospace; font-weight: 700; text-transform: uppercase; }
.v-ALERTE.g-c { background: var(--bg-danger-strong); border: 1px solid var(--border-danger-strong); color: var(--text-danger); }
.v-ALERTE.g-h { background: var(--bg-danger-medium); border: 1px solid var(--border-danger-medium); color: var(--text-warning); }
.v-ALERTE.g-m { background: var(--bg-warning); border: 1px solid var(--border-danger-medium); color: var(--text-warning); }

.v-OK { display: inline-flex; align-items: center; gap: 5px; background: var(--bg-success); border: 1px solid var(--border-success); border-radius: 7px; padding: 5px 12px; font-size: 12px; font-family: 'IBM Plex Mono', monospace; font-weight: 600; color: var(--text-success); }
.v-SKIP { display: inline-flex; align-items: center; gap: 5px; background: var(--bg-tertiary); border: 1px solid var(--border-interactive); border-radius: 7px; padding: 5px 12px; font-size: 12px; font-family: 'IBM Plex Mono', monospace; color: var(--text-placeholder); }

.detail-ok { font-size: 11px; color: var(--text-success-muted); font-family: 'IBM Plex Mono', monospace; margin-top: 4px; }
.detail-al { font-size: 11px; color: var(--text-danger-muted); font-family: 'IBM Plex Mono', monospace; margin-top: 4px; }
.seuil-lbl { font-size: 11px; color: var(--text-muted-light); font-family: 'IBM Plex Mono', monospace; }

/* ── CHIPS ── */
.chip { display: inline-flex; align-items: center; padding: 4px 9px; border-radius: 7px; font-size: 11px; font-family: 'IBM Plex Mono', monospace; font-weight: 600; text-transform: uppercase; border: 1px solid transparent; }
.c-red { background: var(--bg-danger-strong); color: var(--text-danger); border-color: var(--border-danger-strong); }
.c-ora { background: var(--bg-danger-medium); color: var(--text-warning); border-color: var(--border-danger-medium); }
.c-yel { background: var(--bg-warning); color: var(--text-warning); border-color: var(--border-danger-medium); }
.c-grn { background: var(--bg-success); color: var(--text-success); border-color: var(--border-success); }

/* ── STATS & BATCH TABLE ── */
.stat-g { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 24px; }
.st { background: var(--bg-secondary); border: 1px solid var(--border-primary); border-radius: 12px; padding: 16px; }
.st-v { font-size: 28px; font-weight: 800; font-family: 'IBM Plex Mono', monospace; line-height: 1; margin-bottom: 4px; }
.st-l { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-placeholder); font-family: 'IBM Plex Mono', monospace; }

.btch-table { width: 100%; border-collapse: collapse; }
.btch-table th { text-align: left; padding: 10px 14px; font-size: 10px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-placeholder); font-family: 'IBM Plex Mono', monospace; border-bottom: 1px solid var(--border-primary); background: var(--bg-tertiary); }
.btch-table td { padding: 12px 14px; border-bottom: 1px solid var(--border-secondary); font-size: 13px; vertical-align: middle; }
.btch-table tr:hover td { background: var(--bg-hover); cursor: pointer; }

.run-all { background: var(--bg-code); border: 1px solid var(--border-interactive); border-radius: 8px; color: var(--text-accent); padding: 10px 20px; font-family: 'Syne', sans-serif; font-weight: 700; font-size: 12px; cursor: pointer; transition: all .15s; }
.run-all:hover { background: var(--bg-code-hover); color: var(--text-accent-hover); }

/* ─── THEME TOGGLE & TOOLTIP ─── */
.theme-toggle { background: var(--bg-tertiary); border: 1px solid var(--border-primary); border-radius: 9px; color: var(--text-muted-light); width: 38px; height: 38px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all .15s; font-size: 16px; }
.theme-toggle:hover { border-color: var(--border-interactive); color: var(--text-accent); }

.tooltip-container { position: relative; display: inline-block; cursor: help; }
.tooltip-text { visibility: hidden; width: 220px; background-color: var(--bg-code); color: var(--text-accent); text-align: center; border-radius: 8px; padding: 10px; position: absolute; z-index: 1; bottom: 130%; left: 50%; margin-left: -110px; opacity: 0; transition: opacity 0.3s; font-size: 11px; font-family: 'IBM Plex Mono', monospace; line-height: 1.6; border: 1px solid var(--border-interactive); }
.tooltip-container:hover .tooltip-text { visibility: visible; opacity: 1; }
.tooltip-text strong { color: var(--text-accent-hover); }
