:root {
    --bg-main: #f0f2f5;
    --bg-sec: #ffffff;
    --bg-ter: #e4e6eb;
    --bg-accent: #f8f9fa;
    --bg-hover: #e9ecef;
    --bg-overlay: rgba(255, 255, 255, 0.8);
    --border-color: #d1d5db;
    --text-primary: #1c1e21;
    --text-secondary: #606770;
    --text-placeholder: #8a929f;
    --text-accent: #0d6efd;
    --text-danger: #dc3545;
    --text-warning: #ffc107;
    --text-success: #198754;
    --shadow: 0 1px 2px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1);
    --radius-sm: 4px;
    --radius-md: 8px;
}

[data-theme="dark"] {
    --bg-main: #18191a;
    --bg-sec: #242526;
    --bg-ter: #3a3b3c;
    --bg-accent: #2c2d2e;
    --bg-hover: #3a3b3c;
    --bg-overlay: rgba(0, 0, 0, 0.5);
    --border-color: #3e4042;
    --text-primary: #e4e6eb;
    --text-secondary: #b0b3b8;
    --text-placeholder: #8a929f;
    --text-accent: #2e89ff;
    --text-danger: #ff5252;
    --text-warning: #ffab40;
    --text-success: #00e676;
}

/* Global Resets & Body */
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    background-color: var(--bg-main);
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 0.2s, color 0.2s;
    font-size: 14px;
}

.app {
    display: grid;
    grid-template-columns: 280px 1fr;
    grid-template-rows: auto 1fr;
    height: 100vh;
    grid-template-areas:
        "header header"
        "sidebar main";
}

/* ─── AUTHENTICATION ─────────────────────────────────────────────────────────────── */
.loading-screen, .login-screen {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    width: 100%;
    background-color: var(--bg-main);
}

.login-box {
    background: var(--bg-sec);
    padding: 30px 40px;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow);
    width: 100%;
    max-width: 400px;
    text-align: center;
    border: 1px solid var(--border-color);
}

.login-box h2 {
    font-size: 22px;
    margin: 15px 0 5px 0;
    color: var(--text-primary);
}

.login-box p {
    color: var(--text-secondary);
    margin-bottom: 25px;
    font-size: 15px;
}

.login-box form {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.login-box .run {
    padding: 12px;
    font-size: 16px;
    font-weight: 500;
}

.signup-text {
    margin-top: 25px;
    font-size: 14px;
}

.link-btn {
    background: none;
    border: none;
    color: var(--text-accent);
    cursor: pointer;
    padding: 0;
    font-size: inherit;
    font-weight: 500;
}

.link-btn:hover { text-decoration: underline; }

.error-msg {
    color: var(--text-danger) !important;
    background-color: rgba(255, 82, 82, 0.1);
    border: 1px solid rgba(255, 82, 82, 0.2);
    padding: 10px;
    border-radius: var(--radius-sm);
    margin-top: -10px;
    margin-bottom: 0px !important;
    font-size: 14px !important;
    text-align: center;
}


/* ─── HEADER ───────────────────────────────────────────────────────────────────── */
.hdr {
    grid-area: header;
    display: flex;
    align-items: center;
    padding: 0 16px;
    background: var(--bg-sec);
    border-bottom: 1px solid var(--border-color);
    height: 56px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.hdr-ico { 
    font-weight: 900; 
    font-size: 20px; 
    width: 32px; 
    height: 32px; 
    background: var(--text-accent); 
    color: var(--bg-sec); 
    display: grid; 
    place-items: center; 
    border-radius: var(--radius-sm);
    margin-right: 12px;
}

.hdr-t { font-weight: 600; font-size: 16px; }
.hdr-s { font-size: 12px; color: var(--text-secondary); }
.hdr-r { margin-left: auto; display: flex; align-items: center; gap: 16px; }

.user-info {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    background: var(--bg-main);
    padding: 6px 12px;
    border-radius: var(--radius-sm);
}

.logout-btn {
    background: var(--bg-ter);
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
    padding: 6px 12px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
}

.logout-btn:hover { background: var(--bg-hover); }

.theme-toggle {
    background: none; border: none; cursor: pointer; font-size: 20px;
    padding: 0; display:flex; align-items:center;
}

/* ─── SIDEBAR ──────────────────────────────────────────────────────────────────── */
.sb {
    grid-area: sidebar;
    background: var(--bg-accent);
    padding: 8px;
    display: flex;
    flex-direction: column;
    border-right: 1px solid var(--border-color);
}

.sb-hd {
    padding: 8px;
    margin-bottom: 4px;
}

.sb-lbl { font-size: 12px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; }
.sb-list { flex-grow: 1; overflow-y: auto; }
.sb-add {
    background: var(--bg-ter);
    border: 1px dashed var(--border-color);
    color: var(--text-secondary);
    padding: 12px;
    margin: 8px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    text-align: center;
}
.sb-add:hover { background: var(--bg-hover); }

.cli {
    display: flex;
    align-items: center;
    padding: 8px;
    margin-bottom: 4px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: background-color 0.15s;
}

.cli:hover { background: var(--bg-hover); }
.cli.active { background: var(--text-accent); color: white; }
.cli.active .cli-id { color: rgba(255, 255, 255, 0.7); }
.cli.active .cli-dot { background: white; }

.cli-av {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--bg-ter);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    margin-right: 12px;
}

.cli-nm { font-weight: 500; font-size: 14px; }
.cli-id { font-size: 11px; color: var(--text-secondary); }
.cli-dot {
    margin-left: auto;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 4px;
}
.d-ok { background: var(--text-success); }
.d-med { background: var(--text-warning); }
.d-hi { background: var(--text-danger); }

.cli-del {
    background: none;
    border: none;
    color: var(--text-placeholder);
    cursor: pointer;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s;
}
.cli:hover .cli-del { visibility: visible; opacity: 1; }
.cli-del:hover { color: var(--text-danger); }
.cli.active .cli-del { color: rgba(255, 255, 255, 0.7); }
.cli.active .cli-del:hover { color: white; }

/* ─── MAIN CONTENT ─────────────────────────────────────────────────────────────── */
.main { grid-area: main; overflow-y: auto; padding: 24px; }

.tabs {
    display: flex;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 24px;
}

.tab {
    padding: 10px 16px;
    cursor: pointer;
    color: var(--text-secondary);
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
    font-weight: 500;
}
.tab:hover { color: var(--text-primary); }
.tab.on {
    color: var(--text-accent);
    border-bottom-color: var(--text-accent);
}

/* Panel & Section Styles */
.panel-h { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
.panel-t { font-size: 20px; font-weight: 600; }
.sec { font-size: 14px; font-weight: 600; color: var(--text-secondary); margin: 24px 0 16px 0; border-bottom: 1px solid var(--border-color); padding-bottom: 8px; }
.sec-toggle {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-accent);
    margin: 24px 0 16px 0;
    cursor: pointer;
    display: inline-flex; align-items: center; gap: 8px;
}

/* Form Grids */
.fg2, .fg3 { display: grid; gap: 16px; }
.fg2 { grid-template-columns: 1fr 1fr; }
.fg3 { grid-template-columns: 1fr 1fr 1fr; }
.advanced-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

/* Field Styles */
.fld { display: flex; flex-direction: column; }
.fld label { font-size: 12px; font-weight: 500; color: var(--text-secondary); margin-bottom: 6px; }
.fld input, .fld select {
    padding: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-sec);
    color: var(--text-primary);
    border-radius: var(--radius-sm);
    font-size: 14px;
}
.fld input:focus, .fld select:focus { border-color: var(--text-accent); outline: none; }

/* Toggle Switch */
.tog-row { display: flex; align-items: center; background: var(--bg-accent); padding: 10px; border-radius: var(--radius-sm); cursor: pointer; }
.tog { width: 36px; height: 20px; background: var(--bg-ter); border-radius: 10px; position: relative; transition: background-color 0.2s; }
.tog::after { content: ''; position: absolute; top: 2px; left: 2px; width: 16px; height: 16px; background: white; border-radius: 50%; transition: transform 0.2s; }
.tog.on { background: var(--text-accent); }
.tog.on::after { transform: translateX(16px); }
.tog-lbl { margin-left: 12px; font-weight: 500; }

/* Buttons */
.run {
    background: var(--text-accent);
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.2s;
}
.run:hover { background: #0b5ed7; }

.run-all { background: var(--text-danger); }
.run-all:hover { background: #c82333; }

/* Results & Verdicts */
.verdict-box { display: flex; align-items: center; gap: 20px; background: var(--bg-accent); padding: 20px; border-radius: var(--radius-md); margin-bottom: 24px; }
.vc { text-align: center; }
.vc-n { font-size: 32px; font-weight: 700; }
.vc-sub { font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
.vc-ok .vc-n, .vc-ok .vc-sub { color: var(--text-success); }
.vc-al .vc-n, .vc-al .vc-sub { color: var(--text-danger); }
.vd-nm { font-size: 18px; font-weight: 600; }
.vd-meta { color: var(--text-secondary); margin: 2px 0 8px 0; }

.chip { font-size: 12px; font-weight: 500; padding: 4px 8px; border-radius: var(--radius-sm); }
.c-red { background: rgba(255, 82, 82, 0.2); color: var(--text-danger); }
.c-ora { background: rgba(255, 171, 64, 0.2); color: var(--text-warning); }
.c-yel { background: rgba(255, 235, 59, 0.2); color: #fbc02d; }
.c-grn { background: rgba(0, 230, 118, 0.2); color: var(--text-success); }

/* Tables */
.ind-table, .btch-table {
    width: 100%;
    border-collapse: collapse;
    background: var(--bg-sec);
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: var(--shadow);
}

.ind-table th, .ind-table td, .btch-table th, .btch-table td {
    padding: 12px 16px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.ind-table thead, .btch-table thead {
    background: var(--bg-accent);
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
}

.ind-table tbody tr:last-child td, .btch-table tbody tr:last-child td { border-bottom: none; }
.btch-table tbody tr { cursor: pointer; transition: background-color 0.15s; }
.btch-table tbody tr:hover { background-color: var(--bg-hover); }

.ind-id { font-weight: 700; font-family: 'IBM Plex Mono', monospace; }
.ind-label { font-weight: 500; }
.ind-rule { font-size: 12px; color: var(--text-secondary); }
.ind-vals { font-family: 'IBM Plex Mono', monospace; font-size: 13px; }
.seuil-lbl { font-family: 'IBM Plex Mono', monospace; font-size: 13px; }
.detail-ok, .detail-al { font-size: 11px; font-family: 'IBM Plex Mono', monospace; }
.detail-ok { color: var(--text-success); }
.detail-al { color: var(--text-danger); }

.row-alerte { background: rgba(255, 82, 82, 0.05); }

.v-OK { color: var(--text-success); font-weight: 700; }
.v-ALERTE { font-weight: 700; }
.g-c { color: var(--text-danger); }
.g-h { color: var(--text-warning); }
.g-m { color: #fbc02d; }
.v-SKIP { color: var(--text-placeholder); font-style: italic; }

/* Misc & Helpers */
.seuil-box {
    background: var(--bg-accent);
    padding: 12px;
    border-radius: var(--radius-sm);
    font-size: 13px;
    color: var(--text-secondary);
}

.empty-state, .welcome-panel {
    text-align: center;
    padding: 60px 20px;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: var(--bg-sec);
    border-radius: var(--radius-md);
}

.empty-state h3, .welcome-panel h2 { font-size: 18px; color: var(--text-primary); }
.empty-state p, .welcome-panel p { color: var(--text-secondary); max-width: 400px; }
.empty-state .run, .welcome-panel .run { margin-top: 20px; }

.stat-g { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 24px; }
.st { background: var(--bg-sec); padding: 20px; border-radius: var(--radius-md); box-shadow: var(--shadow); text-align: center; }
.st-v { font-size: 28px; font-weight: 700; }
.st-l { font-size: 13px; color: var(--text-secondary); margin-top: 4px; }

.tooltip-container {
    position: relative;
    display: inline-block;
    cursor: help;
}

.tooltip-text {
    visibility: hidden;
    width: 220px;
    background-color: #333;
    color: #fff;
    text-align: center;
    border-radius: var(--radius-sm);
    padding: 8px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -110px;
    opacity: 0;
    transition: opacity 0.3s;
}

.tooltip-container:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}

.error-banner {
    background-color: var(--text-danger);
    color: white;
    padding: 12px 16px;
    border-radius: var(--radius-sm);
    margin-bottom: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: var(--shadow);
}

.error-banner .close-btn {
    background: none;
    border: none;
    color: white;
    font-size: 20px;
    cursor: pointer;
    line-height: 1;
}
